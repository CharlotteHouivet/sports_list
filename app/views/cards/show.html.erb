<!-- TOP BANNER -->
<div class="background">
  <div class="bg-text">
    <h3><%= @card.activity_title %></h3>
    <p>"<%=@card.short_description%>"</p>
  </div>
</div>

<!-- DISCIPLINE -->
<div class="container">
  <div class="content">
    <div class="activity">
      <p>
        <% @disciplines.each do |discipline| %>
        <%= discipline.name %>
        <% end %>
      </p>
    </div>
    <div class="description">
      <p id="description_text"><%=@card.long_description%></p>
    </div>

    <!-- PRACTICAL INFORMATION -->
    <div class="practical_info">
      <h3 id="practical_info_title">Practical Information</h3>
      <ul id="practical_info">
        <div class="col-2">
          <li><i class="fas fa-map-pin fa-2x"></i></li>
        </div>
        <div class="col-4">
          <li><%=@card.address%></li>
          <li><span><%=@card.price%></span></li>
        </div>
        <div class="col-3">
          <li><span>Language</span></li>
        </div>
        <div class="col-2">
          <li>
            <% @languages.each do |language| %>
            <%= language.name %>
            <% end %>
          </li>
        </div>
      </ul>
    </div>

    <!-- CAROUSEL -->
    <div id="slideshow">
      <% @card.photos.each do |card| %>
      <div class="mySlides">
        <%= image_tag card, style: "width:100%" %>
      </div>
      
      <% end %>

      <!-- BOUTONS -->
      <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
      <a class="next" onclick="plusSlides(1)">&#10095;</a>

      <div class="hidden">
        <div class="row" id="slideshow_bottom">
          <% @card.photos.each_with_index do |card, n| %>
          <div class="column">
            <%= image_tag card, class: "demo cursor", style: "width:100%", onclick: "currentSlide(#{n + 1})"%>
          </div>
          <% end %>
        </div>
      </div>
    </div>

     <!-- FORMULAIRE EVALUATION -->

  <div class="evaluation">
    <h3 id="evaluation_title">Your Feedbacks</h3>
  <button class="evaluation_button">Comment</button>
  <% if user_signed_in? %>
    <div class="evaluation_form"><%= render 'evaluations/new' %></div>
    </div> 
  <% else %> 
  <% end %> 


    <!-- hide evaluation form before click --> 

    <script> 
      $('.evaluation_form').hide(); 
        <% if user_signed_in? %>
      $(".evaluation_button").click(function(){
      $(".evaluation_form").toggle();
        <% else %>
       $(".evaluation_button").click(function(){
        alert("You need to Sign up or Sign In to evaluate an activity");
            <% end %> 
     });
    </script> 

    <div class="comments_evaluations">
      <% @evaluations.each do |e| %>
        <%= "---------------------------" %><br>
        <%= @users.find(e.user_id).username %><br>
        <%= e.eval %><br>
        <%= e.comment %><br>
      <% end %>
    </div>
  </div>
</div> 

  <div class="sidebar">
    <div id="contact_info">
      <div>
        <p id="contact_name"><%= @card.professional.user.first_name %></p>
        <%= image_tag "coach_pic.jpg", class: "coach_picture"%>
      </div>

      <div>
        <p id="contact_organization"><%= @card.organization%></p>
      </div>
      <button class="display_contact_button" onclick="display_contact()">Book your session with me !</button>
      <div id="display_contact_info">
        <ul>
          <li id="icon"><i class="fab fa-whatsapp fa-2x"></i><%@card.whatsapp%></li>
          <li>
            <a target="_blank" id="icon"><i class="fab fa-facebook-square fa-2x"><% @card.instagram %></i></a>
            <a target="_blank" id="icon"><i class="fab fa-instagram fa-2x"><%@card.facebook %></i></a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>


<div id="card_map">  <!-- display Google map -->
	</div>


<script>
	var map = new google.maps.Map(document.getElementById('card_map'), {
		center: {lat: <%= @card.latitude %>, lng: <%= @card.longitude %>},
		zoom: 9
	})
	var marker = new google.maps.Marker({
		map: map,
		position: {lat: <%= @card.latitude %>, lng: <%= @card.longitude %>},
	})

   var infowindow = new google.maps.InfoWindow({
    content: "<%= @card.address%>"
  });
  
    infowindow.open(map, marker);
</script> 

